# ğŸ§  Clase 3: Integrando Modelos y Mostrando Datos en HTML â€“ AplicaciÃ³n Web con Django

En esta tercera clase del curso de Django, continuarÃ¡s construyendo sobre la base de tu proyecto django_project y tu aplicaciÃ³n Django_app. Esta vez, el enfoque serÃ¡ en la integraciÃ³n de modelos para manejar y almacenar datos, y cÃ³mo mostrar esos datos dinÃ¡micamente en tus plantillas HTML.

La app sigue siendo â€œInicio del Cursoâ€, pero ahora es mÃ¡s potente. AprenderÃ¡s a definir la estructura de tus datos con modelos, a guardar informaciÃ³n en tu base de datos y a recuperarla para presentarla al usuario. Â¡Este es un paso crucial para crear aplicaciones web interactivas y con contenido dinÃ¡mico!

---

## ğŸ¯ Objetivos de la Clase

- Crear un entorno virtual y un proyecto Django (repaso).
- Crear la app Django_app dentro del proyecto (repaso).
- Configurar el entorno para usar plantillas HTML (repaso).
- Renderizar la vista home.html usando TemplateView (repaso).
- Crear un modelo simple en Django para almacenar informaciÃ³n.
- Realizar migraciones para aplicar el modelo a la base de datos.
- Mostrar datos del modelo en la plantilla HTML usando el contexto de la vista.
- Visualizar la pÃ¡gina en el navegador mediante configuraciÃ³n en urls.py.

---

## ğŸ› ï¸ Lo Que AprenderÃ¡s

- CÃ³mo iniciar un proyecto Django desde cero.
- CÃ³mo estructurar una app Django y vincularla al proyecto.
- CÃ³mo configurar la carpeta templates para usar archivos HTML.
- CÃ³mo definir rutas y vistas usando clases.
- CÃ³mo definir modelos en Django para representar y organizar tus datos.
- CÃ³mo usar el ORM (Object-Relational Mapper) de Django para interactuar con la base de datos sin SQL directo.
- CÃ³mo pasar datos de un modelo (o cualquier otro dato) desde la vista a una plantilla HTML.

---

## ğŸš€ GuÃ­a Paso a Paso

### ğŸ”§ 1. Requisitos Previos

AsegÃºrate de tener instalado:

- âœ… Python 3.10 o superior
- âœ… pip (gestor de paquetes de Python)
- âœ… virtualenv *(opcional pero recomendado)*

---

### ğŸ 2. Crear y Activar un Entorno Virtual

```bash
python -m venv env

# Activar el entorno:
source env/bin/activate     # En Linux/macOS
env\Scripts\activate        # En Windows
```

---

### ğŸ“¦ 3. Instalar Django
```bash
pip install django  # Descarga django
```

---

### ğŸ“ 4. Crear el Proyecto Django
```bash
django-admin startproject django_project .  # Esto genera la carpeta django_project/ dentro de tu proyecto
```

#### ğŸ”¸ Nota: No olvides el espacio y el punto (.) al final para instalar el proyecto en la carpeta actual.

---

### ğŸ—ï¸ 5. Crear la App Django
```bash
python manage.py startapp Django_app  # Esto generarÃ¡ la carpeta Django_app/ dentro de tu proyecto.
```  

---

### âš™ï¸ 6. Registrar la App en el proyecto

#### 1. Settings.py
Edita django_project/settings.py y agrega 'Django_app' en INSTALLED_APPS:

INSTALLED_APPS = [
    ...
    'Django_app',
]

#### 2. urls.py
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('django_app.urls'))  # La raÃ­z del sitio web delega sus URLs a la app django_app
]

---

### ğŸ’¾ 7. Crear el Modelo en models.py
En Django_app/models.py, define un modelo simple para almacenar un mensaje de bienvenida. Este modelo tendrÃ¡ un campo para el contenido del mensaje y otro para la fecha de creaciÃ³n:

from django.db import models

class Post(models.Model):
    title = models.TextField(max_length=200)
    description = models.TextField()

    def __str__(self):
        return self.title
---

### ğŸ“¤ 8. Realizar Migraciones
DespuÃ©s de crear o modificar modelos, siempre debes indicarle a Django que cree o actualice las tablas correspondientes en tu base de datos.
```bash
python manage.py makemigrations # Crea los archivos de migraciÃ³n (plan de cambios)
python manage.py migrate        # Aplica los cambios a la base de datos (ejecuta el plan)
```

---

### ğŸ“ 9. Crear la Carpeta de Templates y home.html
Crea una carpeta llamada templates y dentro de ella el archivo home.html. Modificaremos home.html para que pueda mostrar el contenido de nuestro modelo dinÃ¡micamente:

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    {% for article in object_list %}
        <li>{{ article.title }} - {{ article.description }}</li>
    {% empty %}
        <li>No articles yet.</li>
    {% endfor %}
</body>
</html>

---

### ğŸ§­ 10. Configurar settings.py para Templates
En el bloque TEMPLATES de django_project/settings.py, ajusta la clave DIRS para que Django sepa dÃ³nde buscar tus plantillas:

TEMPLATES = [
    {
        'DIRS': [BASE_DIR / 'Django_app' / 'templates'], # Asegura que Django encuentre tu carpeta 'templates'
        ...
    },
]

---

### ğŸ‘ï¸ 11. Crear la Vista en views.py
En Django_app/views.py, modificaremos la vista HomeView para que no solo renderice la plantilla, sino que tambiÃ©n obtenga el mensaje de bienvenida de nuestro modelo y lo pase a la plantilla a travÃ©s del contexto:

from django.shortcuts import render
from django.views.generic import ListView

from .models import Post

class PostListView(ListView):
    template_name = "home.html"
    model = Post

---

### ğŸ›£ï¸ 12. Configurar Rutas en urls.py
Edita django_project/urls.py para que la URL raÃ­z (la ruta vacÃ­a '') apunte a nuestra HomeView:

from django.contrib import admin
from django.urls import path
from Django_app.views import HomeView # Importa tu vista

urlpatterns = [
    path('admin/', admin.site.urls), # Ruta para el panel de administraciÃ³n
    path('', HomeView.as_view(), name='home'), # Ruta para la pÃ¡gina de inicio
]

---

### â• 13. Agregar un Mensaje de Bienvenida (Â¡Para ver el modelo en acciÃ³n!)
Para que el mensaje aparezca en tu home.html, necesitas aÃ±adir un registro en tu modelo Post. Tienes dos formas principales de hacerlo:

Usando el Panel de AdministraciÃ³n de Django (Recomendado para manejar datos):
#### 1. Crea un superusuario para acceder al panel de administraciÃ³n (si no lo has hecho ya):

```bash
python manage.py createsuperuser
```
Sigue las instrucciones en pantalla para definir tu usuario y contraseÃ±a.

#### 2. Registra tu modelo en Django_app/admin.py para que sea visible en el panel:

from django.contrib import admin
from .models import Post

admin.site.register(Post)

#### 3. Levanta el servidor de desarrollo:

```bash
python manage.py runserver
```

#### 4. Abre tu navegador y navega a: http://127.0.0.1:8000/admin/.

#### 5. Inicia sesiÃ³n con las credenciales del superusuario que creaste.

#### 6. DeberÃ­as ver una secciÃ³n para "Django_app" y dentro de ella, "Mensajes de bienvenida". Haz clic en "Mensajes de bienvenida" y luego en "AÃ±adir mensaje de bienvenida" para crear tu primer registro.

---

### ğŸš¦ 14. Levantar el Servidor y Verificar
```bash
python manage.py runserver  # Esto levanta el servidor de desarrollo
```
---










âœ… Â¡Listo!

Ahora tu proyecto Django no solo muestra una plantilla HTML, sino que tambiÃ©n recupera y presenta datos desde un modelo en tu base de datos. Esto marca un hito importante, ya que has comenzado a trabajar con la persistencia de datos y la interactividad en tus aplicaciones web.