# 🧠 Clase 3: Integrando Modelos y Mostrando Datos en HTML – Aplicación Web con Django

En esta tercera clase del curso de Django, continuarás construyendo sobre la base de tu proyecto django_project y tu aplicación Django_app. Esta vez, el enfoque será en la integración de modelos para manejar y almacenar datos, y cómo mostrar esos datos dinámicamente en tus plantillas HTML.

La app sigue siendo “Inicio del Curso”, pero ahora es más potente. Aprenderás a definir la estructura de tus datos con modelos, a guardar información en tu base de datos y a recuperarla para presentarla al usuario. ¡Este es un paso crucial para crear aplicaciones web interactivas y con contenido dinámico!

---

## 🎯 Objetivos de la Clase

- Crear un entorno virtual y un proyecto Django (repaso).
- Crear la app Django_app dentro del proyecto (repaso).
- Configurar el entorno para usar plantillas HTML (repaso).
- Renderizar la vista home.html usando TemplateView (repaso).
- Crear un modelo simple en Django para almacenar información.
- Realizar migraciones para aplicar el modelo a la base de datos.
- Mostrar datos del modelo en la plantilla HTML usando el contexto de la vista.
- Visualizar la página en el navegador mediante configuración en urls.py.

---

## 🛠️ Lo Que Aprenderás

- Cómo iniciar un proyecto Django desde cero.
- Cómo estructurar una app Django y vincularla al proyecto.
- Cómo configurar la carpeta templates para usar archivos HTML.
- Cómo definir rutas y vistas usando clases.
- Cómo definir modelos en Django para representar y organizar tus datos.
- Cómo usar el ORM (Object-Relational Mapper) de Django para interactuar con la base de datos sin SQL directo.
- Cómo pasar datos de un modelo (o cualquier otro dato) desde la vista a una plantilla HTML.

---

## 🚀 Guía Paso a Paso

### 🔧 1. Requisitos Previos

Asegúrate de tener instalado:

- ✅ Python 3.10 o superior
- ✅ pip (gestor de paquetes de Python)
- ✅ virtualenv *(opcional pero recomendado)*

---

### 🐍 2. Crear y Activar un Entorno Virtual

```bash
python -m venv env

# Activar el entorno:
source env/bin/activate     # En Linux/macOS
env\Scripts\activate        # En Windows
```

---

### 📦 3. Instalar Django
```bash
pip install django  # Descarga django
```

---

### 📁 4. Crear el Proyecto Django
```bash
django-admin startproject django_project .  # Esto genera la carpeta django_project/ dentro de tu proyecto
```

#### 🔸 Nota: No olvides el espacio y el punto (.) al final para instalar el proyecto en la carpeta actual.

---

### 🏗️ 5. Crear la App Django
```bash
python manage.py startapp Django_app  # Esto generará la carpeta Django_app/ dentro de tu proyecto.
```  

---

### ⚙️ 6. Registrar la App en el proyecto

#### 1. Settings.py
Edita django_project/settings.py y agrega 'Django_app' en INSTALLED_APPS:

INSTALLED_APPS = [
    ...
    'Django_app',
]

#### 2. urls.py
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('django_app.urls'))  # La raíz del sitio web delega sus URLs a la app django_app
]

---

### 💾 7. Crear el Modelo en models.py
En Django_app/models.py, define un modelo simple para almacenar un mensaje de bienvenida. Este modelo tendrá un campo para el contenido del mensaje y otro para la fecha de creación:

from django.db import models

class Post(models.Model):
    title = models.TextField(max_length=200)
    description = models.TextField()

    def __str__(self):
        return self.title
---

### 📤 8. Realizar Migraciones
Después de crear o modificar modelos, siempre debes indicarle a Django que cree o actualice las tablas correspondientes en tu base de datos.
```bash
python manage.py makemigrations # Crea los archivos de migración (plan de cambios)
python manage.py migrate        # Aplica los cambios a la base de datos (ejecuta el plan)
```

---

### 📝 9. Crear la Carpeta de Templates y home.html
Crea una carpeta llamada templates y dentro de ella el archivo home.html. Modificaremos home.html para que pueda mostrar el contenido de nuestro modelo dinámicamente:

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    {% for article in object_list %}
        <li>{{ article.title }} - {{ article.description }}</li>
    {% empty %}
        <li>No articles yet.</li>
    {% endfor %}
</body>
</html>

---

### 🧭 10. Configurar settings.py para Templates
En el bloque TEMPLATES de django_project/settings.py, ajusta la clave DIRS para que Django sepa dónde buscar tus plantillas:

TEMPLATES = [
    {
        'DIRS': [BASE_DIR / 'Django_app' / 'templates'], # Asegura que Django encuentre tu carpeta 'templates'
        ...
    },
]

---

### 👁️ 11. Crear la Vista en views.py
En Django_app/views.py, modificaremos la vista HomeView para que no solo renderice la plantilla, sino que también obtenga el mensaje de bienvenida de nuestro modelo y lo pase a la plantilla a través del contexto:

from django.shortcuts import render
from django.views.generic import ListView

from .models import Post

class PostListView(ListView):
    template_name = "home.html"
    model = Post

---

### 🛣️ 12. Configurar Rutas en urls.py
Edita django_project/urls.py para que la URL raíz (la ruta vacía '') apunte a nuestra HomeView:

from django.contrib import admin
from django.urls import path
from Django_app.views import HomeView # Importa tu vista

urlpatterns = [
    path('admin/', admin.site.urls), # Ruta para el panel de administración
    path('', HomeView.as_view(), name='home'), # Ruta para la página de inicio
]

---

### ➕ 13. Agregar un Mensaje de Bienvenida (¡Para ver el modelo en acción!)
Para que el mensaje aparezca en tu home.html, necesitas añadir un registro en tu modelo Post. Tienes dos formas principales de hacerlo:

Usando el Panel de Administración de Django (Recomendado para manejar datos):
#### 1. Crea un superusuario para acceder al panel de administración (si no lo has hecho ya):

```bash
python manage.py createsuperuser
```
Sigue las instrucciones en pantalla para definir tu usuario y contraseña.

#### 2. Registra tu modelo en Django_app/admin.py para que sea visible en el panel:

from django.contrib import admin
from .models import Post

admin.site.register(Post)

#### 3. Levanta el servidor de desarrollo:

```bash
python manage.py runserver
```

#### 4. Abre tu navegador y navega a: http://127.0.0.1:8000/admin/.

#### 5. Inicia sesión con las credenciales del superusuario que creaste.

#### 6. Deberías ver una sección para "Django_app" y dentro de ella, "Mensajes de bienvenida". Haz clic en "Mensajes de bienvenida" y luego en "Añadir mensaje de bienvenida" para crear tu primer registro.

---

### 🚦 14. Levantar el Servidor y Verificar
```bash
python manage.py runserver  # Esto levanta el servidor de desarrollo
```
---










✅ ¡Listo!

Ahora tu proyecto Django no solo muestra una plantilla HTML, sino que también recupera y presenta datos desde un modelo en tu base de datos. Esto marca un hito importante, ya que has comenzado a trabajar con la persistencia de datos y la interactividad en tus aplicaciones web.